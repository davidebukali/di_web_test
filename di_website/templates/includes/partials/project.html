{% load wagtailimages_tags wagtailcore_tags static %}

<div class="project">
  <div class="project__main">
    <div class="project__header">
      {% if self.image %}
        {% image self.image fill-180x112-c100 as image %}
        <div class="project__media">
          <img src="{{ image.url }}" alt="{{ image.alt }}">
        </div>
      {% endif %}
      <h2 class="project__heading">{{self.title}}</h2>
      <h3 class="project__subheading">{{self.subtitle|default_if_none:""}}</h3>
    </div>
    <div class="is-typeset">
      {{self.body|richtext}}
    </div>
  </div>
  <div class="project__aside">
    <h3 class="project__subheading">Key projects</h3>
      {% if focus_area_page.first_project_page.projectpage %}
          {% if focus_area_page.first_project_page.projectpage.hero_image %}
              {% image focus_area_page.first_project_page.projectpage.hero_image max-313x178 as hero_img %}
              <a href="#" class="project-card" style="background-image: url({{hero_img.url}});">
          {% else %}
              <a href="#" class="project-card" style="background-image: url({% static 'img/fallback-image.jpg' %});">
          {% endif %}
              <span class="project-card__caption">{{ focus_area_page.first_project_page.specific.body }}</span>
          </a>
      {% endif %}

      {% if focus_area_page.second_project_page.projectpage %}
          {% if focus_area_page.second_project_page.projectpage.hero_image %}
              {% image focus_area_page.second_project_page.projectpage.hero_image max-313x178 as hero_img %}
              <a href="#" class="project-card" style="background-image: url({{hero_img.url}});">
          {% else %}
              <a href="#" class="project-card" style="background-image: url({% static 'img/fallback-image.jpg' %});">
          {% endif %}
              <span class="project-card__caption">{{ focus_area_page.second_project_page.specific.body }}</span>
          </a>
      {% endif %}
  </div>
</div>
