var DICharts=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";var r=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===o}(t)}(t)};var o="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function i(t,e){return!1!==e.clone&&e.isMergeableObject(t)?f((n=t,Array.isArray(n)?[]:{}),t,e):t;var n}function a(t,e,n){return t.concat(e).map((function(t){return i(t,n)}))}function c(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return t.propertyIsEnumerable(e)})):[]}(t))}function u(t,e){try{return e in t}catch(t){return!1}}function l(t,e,n){var r={};return n.isMergeableObject(t)&&c(t).forEach((function(e){r[e]=i(t[e],n)})),c(e).forEach((function(o){(function(t,e){return u(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,o)||(u(t,o)&&n.isMergeableObject(e[o])?r[o]=function(t,e){if(!e.customMerge)return f;var n=e.customMerge(t);return"function"==typeof n?n:f}(o,n)(t[o],e[o],n):r[o]=i(e[o],n))})),r}function f(t,e,n){(n=n||{}).arrayMerge=n.arrayMerge||a,n.isMergeableObject=n.isMergeableObject||r,n.cloneUnlessOtherwiseSpecified=i;var o=Array.isArray(e);return o===Array.isArray(t)?o?n.arrayMerge(t,e,n):l(t,e,n):i(e,n)}f.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,n){return f(t,n,e)}),{})};var s=f;t.exports=s},function(t,e,n){"use strict";n.r(e),n.d(e,"handler",(function(){return w})),n.d(e,"Chart",(function(){return i}));function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"chartElement",void 0),o(this,"showLoading",(function(){var t=n.getParentElement();t&&t.classList.add("chart-container--loading")})),o(this,"hideLoading",(function(){var t=n.getParentElement();t&&function(t){t.classList.remove("chart-container--loading");var e=t.querySelector(".chart-loading");e&&e.classList.add("hide")}(t)})),o(this,"addFilter",(function(t,e,r){var o=n.getElement(t);return e.forEach((function(t){var e=document.createElement("option");e.value=t,e.text=n.getFilterText(t,r),o.appendChild(e)})),o.classList.add("data-selector--active"),o})),this.chartElement=this.getElement(e)}var e,n,i;return e=t,(n=[{key:"getParentElement",value:function(){return this.chartElement.parentElement}},{key:"getFilterText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.labelPrefix,r=e.labelSuffix;return"".concat(n||"").concat(t).concat(r||"")}},{key:"getElement",value:function(t){if(!t)throw new Error("An id to the element or an actual element is required");if("string"==typeof t){var e=document.getElementById(t);if(!e)throw new Error("No element with id ".concat(t));return e}return t}}])&&r(e.prototype,n),i&&r(e,i),t}(),a=n(0),c=n.n(a);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=y(t);if(e){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?h(t):e}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var v,g,b={displayModeBar:!0,responsive:!0,showLink:!1,plotlyServerURL:"https://chart-studio.plotly.com",toImageButtonOptions:{width:1200,height:657},modeBarButtonsToRemove:["pan2d","select2d","lasso2d","hoverClosestCartesian","hoverCompareCartesian","toggleSpikelines"]},m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(i,t);var e,n,r,o=s(i);function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),p(h(n=o.call(this,t)),"options",void 0),p(h(n),"data",[]),p(h(n),"layout",{}),p(h(n),"config",{}),p(h(n),"plot",void 0),p(h(n),"sourceData",void 0),p(h(n),"filters",[]),p(h(n),"getPlot",(function(){return n.plot})),p(h(n),"setData",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n.data=t,h(n)})),p(h(n),"setLayout",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.layout=c()(n.layout,t),h(n)})),p(h(n),"setConfig",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.config=c()(n.config,t),h(n)})),p(h(n),"getConfig",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(b,t)})),p(h(n),"getOptions",(function(){return n.options})),p(h(n),"setFilters",(function(t){n.filters=t})),p(h(n),"getFilters",(function(){return n.filters})),p(h(n),"csv",(function(t){return new Promise((function(e){window.Plotly.d3.csv(t,(function(t){e(t)}))}))})),p(h(n),"updatePlot",(function(){return n.plot?window.Plotly.react(n.chartElement,n.data,n.layout,n.getConfig(n.config)).then((function(t){return n.addPlot(t),n.hideLoading(),{plot:t,config:n.options}})):n.newPlot(n.chartElement,n.data,n.layout,n.getConfig(n.config))})),n.options=e,n}return e=i,(n=[{key:"setSourceData",value:function(t){return this.sourceData=t,this}},{key:"getSourceData",value:function(){return this.sourceData}},{key:"addPlot",value:function(t){return this.plot=t,this}},{key:"newPlot",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return window.Plotly.newPlot(t,e,r,this.getConfig(o)).then((function(t){return t.on("plotly_click",(function(t){n.options.onClick&&n.options.onClick(t,n)})),n.plot||n.initCustomWidgets(),n.addPlot(t),n.initPlotlyWidgets(),n.hideLoading(),{plot:t,config:n.options}}))}},{key:"initCustomWidgets",value:function(){var t=this,e=this.options.widgets,n=void 0===e?{}:e;n.filters&&n.filters.forEach((function(e){return t.handleFilter(e)})),n.legend&&this.handleLegend(n.legend)}},{key:"initPlotlyWidgets",value:function(){var t=this.options.widgets,e=void 0===t?{}:t;e.legend&&this.handleLegend(e.legend)}},{key:"handleFilter",value:function(t){var e=this.getParentElement();if(e){var n=e.querySelector(".".concat(t.className));if(!n)throw new Error("No element with class ".concat(t.className));var r=t.options;!r&&t.getOptions&&(r=t.getOptions(this)),r&&r.length&&(this.addFilter(n,r||[]),this.addFilterEvents(n,t),this.setFilters(this.filters.concat({name:t.className,value:[r[0]]})))}}},{key:"addFilterEvents",value:function(t,e){var n=this;e.onChange&&t.addEventListener("change",(function(t){var r=t.target.value;n.setFilters(n.filters.map((function(t){return t.name===e.className&&-1===t.value.indexOf(r)&&(t.value=e.multi?t.value.concat(r):[r]),t}))),e.onChange(t,n)}))}},{key:"handleLegend",value:function(t){var e=this;this.plot&&t.onClick&&this.plot.on("plotly_legendclick",(function(n){t.onClick&&t.onClick(n,e)}))}}])&&l(e.prototype,n),r&&l(e,r),i}(i),w=(v=[],g=function(t){var e=function(t){if(!t)throw new Error("An indentifying class for the element is required");return document.querySelectorAll(".".concat(t,":not(.dicharts-handler--active)"))}(t.className);Array.prototype.forEach.call(e,(function(e){e.classList.add("dicharts-handler--active"),t.plotly&&function(t,e){var n=new m(t,e);n.showLoading(),n.setLayout(e.layout).setConfig(e.config),e.data&&e.data.length?n.setData(e.data).updatePlot():e.csv&&n.csv(e.csv.url).then((function(t){var r;n.setSourceData(t),null===(r=e.csv)||void 0===r||r.onFetch(t,e,n)}))}(e,t.plotly)}))},{addChart:function(t){v.push(t),t.onAdd&&t.onAdd(t),g(t)},getCharts:function(){return v}})}]);